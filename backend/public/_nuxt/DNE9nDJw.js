import{N as J,D as R,b as Y,E as Pe,G as P,z as A,H as ye,I as Be,J as De,K as ee,i as ue,A as C,c as x,o as z,a as X,L as oe,x as B,k as o,t as Ae,w as D,C as te,M as _e,O as ge,P as Oe,Q as W,R as Fe,S as $e,T as ze,U as Ne,q as Ye,V as Re,W as je,X as ce,l as Ue,Y as Ve,B as Xe,Z as We}from"./EwCbqKW-.js";import{P as Q,F as He,t as Ke,E as qe,a as Ge}from"./BYrQAmaY.js";import{b as le,u as se,d as H,i as Ze,a as ne,_ as pe,C as Je,E as xe,c as Qe,e as be,h as de,f as eo,g as oo,r as to,j as no,k as lo,l as fe,w as so}from"./CVOtDZBH.js";import{u as ao}from"./CIa6fhAL.js";import{U as Ce,u as ro}from"./Dad0xDRF.js";import{t as io,u as ve}from"./daoBXWbk.js";import{g as uo}from"./r1GSfbrt.js";import{u as co}from"./DkAOjvrk.js";const he=e=>{if(!e)return{onClick:J,onMousedown:J,onMouseup:J};let s=!1,a=!1;return{onClick:u=>{s&&a&&e(u),s=a=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{a=u.target===u.currentTarget}}},fo=le({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:H([String,Array,Object])},zIndex:{type:H([String,Number])}}),vo={click:e=>e instanceof MouseEvent},mo="overlay";var yo=R({name:"ElOverlay",props:fo,emits:vo,setup(e,{slots:s,emit:a}){const y=se(mo),n=i=>{a("click",i)},{onClick:d,onMousedown:u,onMouseup:g}=he(e.customMaskEvent?void 0:n);return()=>e.mask?Y("div",{class:[y.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:g},[P(s,"default")],Q.STYLE|Q.CLASS|Q.PROPS,["onClick","onMouseup","onMousedown"]):Pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[P(s,"default")])}});const go=yo,we=Symbol("dialogInjectionKey"),me="dialog-fade",Ee=le({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:Ze},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),po={close:()=>!0},bo=(e,s,a,y)=>{const n={offsetX:0,offsetY:0},d=A(!1),u=(v,f)=>{if(e.value){const{offsetX:p,offsetY:k}=n,E=e.value.getBoundingClientRect(),b=E.left,c=E.top,S=E.width,I=E.height,_=document.documentElement.clientWidth,$=document.documentElement.clientHeight,N=-b+p,O=-c+k,L=_-b-S+p,F=$-c-(I<$?I:0)+k;y?.value||(v=Math.min(Math.max(v,N),L),f=Math.min(Math.max(f,O),F)),n.offsetX=v,n.offsetY=f,e.value.style.transform=`translate(${ne(v)}, ${ne(f)})`}},g=v=>{const f=v.clientX,p=v.clientY,{offsetX:k,offsetY:E}=n,b=S=>{d.value||(d.value=!0);const I=k+S.clientX-f,_=E+S.clientY-p;u(I,_)},c=()=>{d.value=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)},i=()=>{s.value&&e.value&&(s.value.addEventListener("mousedown",g),window.addEventListener("resize",w))},m=()=>{s.value&&e.value&&(s.value.removeEventListener("mousedown",g),window.removeEventListener("resize",w))},h=()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},w=()=>{const{offsetX:v,offsetY:f}=n;u(v,f)};return ye(()=>{Be(()=>{a.value?i():m()})}),De(()=>{m()}),{isDragging:d,resetPosition:h,updatePosition:w}},Co=(...e)=>s=>{e.forEach(a=>{ee(a)?a(s):a.value=s})},ho=R({name:"ElDialogContent"}),wo=R({...ho,props:Ee,emits:po,setup(e,{expose:s}){const a=e,{t:y}=ao(),{Close:n}=Je,{dialogRef:d,headerRef:u,bodyId:g,ns:i,style:m}=ue(we),{focusTrapRef:h}=ue(He),w=Co(h,d),v=C(()=>!!a.draggable),f=C(()=>!!a.overflow),{resetPosition:p,updatePosition:k,isDragging:E}=bo(d,u,v,f),b=C(()=>[i.b(),i.is("fullscreen",a.fullscreen),i.is("draggable",v.value),i.is("dragging",E.value),i.is("align-center",!!a.alignCenter),{[i.m("center")]:a.center}]);return s({resetPosition:p,updatePosition:k}),(c,S)=>(z(),x("div",{ref:o(w),class:B(o(b)),style:ge(o(m)),tabindex:"-1"},[X("header",{ref_key:"headerRef",ref:u,class:B([o(i).e("header"),c.headerClass,{"show-close":c.showClose}])},[P(c.$slots,"header",{},()=>[X("span",{role:"heading","aria-level":c.ariaLevel,class:B(o(i).e("title"))},Ae(c.title),11,["aria-level"])]),c.showClose?(z(),x("button",{key:0,"aria-label":o(y)("el.dialog.close"),class:B(o(i).e("headerbtn")),type:"button",onClick:I=>c.$emit("close")},[Y(o(xe),{class:B(o(i).e("close"))},{default:D(()=>[(z(),te(_e(c.closeIcon||o(n))))]),_:1},8,["class"])],10,["aria-label","onClick"])):oe("v-if",!0)],2),X("div",{id:o(g),class:B([o(i).e("body"),c.bodyClass])},[P(c.$slots,"default")],10,["id"]),c.$slots.footer?(z(),x("footer",{key:0,class:B([o(i).e("footer"),c.footerClass])},[P(c.$slots,"footer")],2)):oe("v-if",!0)],6))}});var Eo=pe(wo,[["__file","dialog-content.vue"]]);const ko=le({...Ee,appendToBody:Boolean,appendTo:{type:Ke.to.type,default:"body"},beforeClose:{type:H(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:H([String,Object]),default:void 0}}),So={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ce]:e=>Qe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},To=(e,s={})=>{Oe(e)||io("[useLockscreen]","You need to pass a ref param to this function");const a=s.ns||se("popup"),y=C(()=>a.bm("parent","hidden"));if(!be||de(document.body,y.value))return;let n=0,d=!1,u="0";const g=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=u,to(document.body,y.value))},200)};W(e,i=>{if(!i){g();return}d=!de(document.body,y.value),d&&(u=document.body.style.width,eo(document.body,y.value)),n=uo(a.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,h=oo(document.body,"overflowY");n>0&&(m||h==="scroll")&&d&&(document.body.style.width=`calc(100% - ${n}px)`)}),Fe(()=>g())},Io=(e,s)=>{var a;const n=$e().emit,{nextZIndex:d}=no();let u="";const g=ve(),i=ve(),m=A(!1),h=A(!1),w=A(!1),v=A((a=e.zIndex)!=null?a:d());let f,p;const k=co(),E=C(()=>{var t,r;return(r=(t=k.value)==null?void 0:t.namespace)!=null?r:lo}),b=C(()=>{var t;return(t=k.value)==null?void 0:t.dialog}),c=C(()=>{const t={},r=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(t[`${r}-margin-top`]=e.top),e.width&&(t[`${r}-width`]=ne(e.width))),t}),S=C(()=>{var t,r,T;return((T=(r=e.draggable)!=null?r:(t=b.value)==null?void 0:t.draggable)!=null?T:!1)&&!e.fullscreen}),I=C(()=>{var t,r,T;return(T=(r=e.alignCenter)!=null?r:(t=b.value)==null?void 0:t.alignCenter)!=null?T:!1}),_=C(()=>{var t,r,T;return(T=(r=e.overflow)!=null?r:(t=b.value)==null?void 0:t.overflow)!=null?T:!1}),$=C(()=>I.value?{display:"flex"}:{}),N=C(()=>{var t,r,T;const G=(T=(r=e.transition)!=null?r:(t=b.value)==null?void 0:t.transition)!=null?T:me,Le={name:G,onAfterEnter:O,onBeforeLeave:F,onAfterLeave:L};if(ze(G)){const M={...G},Z=(V,Me)=>re=>{Ne(V)?V.forEach(ie=>{ee(ie)&&ie(re)}):ee(V)&&V(re),Me()};return M.onAfterEnter=Z(M.onAfterEnter,O),M.onBeforeLeave=Z(M.onBeforeLeave,F),M.onAfterLeave=Z(M.onAfterLeave,L),M.name||(M.name=me),M}return Le});function O(){n("opened")}function L(){n("closed"),n(Ce,!1),e.destroyOnClose&&(w.value=!1)}function F(){n("close")}function K(){p?.(),f?.(),e.openDelay&&e.openDelay>0?{stop:f}=fe(()=>ae(),e.openDelay):ae()}function l(){f?.(),p?.(),e.closeDelay&&e.closeDelay>0?{stop:p}=fe(()=>q(),e.closeDelay):q()}function j(){function t(r){r||(h.value=!0,m.value=!1)}e.beforeClose?e.beforeClose(t):l()}function U(){e.closeOnClickModal&&j()}function ae(){be&&(m.value=!0)}function q(){m.value=!1}function ke(){n("openAutoFocus")}function Se(){n("closeAutoFocus")}function Te(t){var r;((r=t.detail)==null?void 0:r.focusReason)==="pointer"&&t.preventDefault()}e.lockScroll&&To(m);function Ie(){e.closeOnPressEscape&&j()}return W(()=>e.zIndex,()=>{var t;v.value=(t=e.zIndex)!=null?t:d()}),W(()=>e.modelValue,t=>{var r;t?(h.value=!1,K(),w.value=!0,v.value=(r=e.zIndex)!=null?r:d(),Ye(()=>{n("open"),s.value&&(s.value.parentElement.scrollTop=0,s.value.parentElement.scrollLeft=0,s.value.scrollTop=0)})):m.value&&l()}),W(()=>e.fullscreen,t=>{s.value&&(t?(u=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=u)}),ye(()=>{e.modelValue&&(m.value=!0,w.value=!0,K())}),{afterEnter:O,afterLeave:L,beforeLeave:F,handleClose:j,onModalClick:U,close:l,doClose:q,onOpenAutoFocus:ke,onCloseAutoFocus:Se,onCloseRequested:Ie,onFocusoutPrevented:Te,titleId:g,bodyId:i,closed:h,style:c,overlayDialogStyle:$,rendered:w,visible:m,zIndex:v,transitionConfig:N,_draggable:S,_alignCenter:I,_overflow:_}},Lo=R({name:"ElDialog",inheritAttrs:!1}),Mo=R({...Lo,props:ko,emits:So,setup(e,{expose:s}){const a=e,y=Re();ro({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},C(()=>!!y.title));const n=se("dialog"),d=A(),u=A(),g=A(),{visible:i,titleId:m,bodyId:h,style:w,overlayDialogStyle:v,rendered:f,transitionConfig:p,zIndex:k,_draggable:E,_alignCenter:b,_overflow:c,handleClose:S,onModalClick:I,onOpenAutoFocus:_,onCloseAutoFocus:$,onCloseRequested:N,onFocusoutPrevented:O}=Io(a,d);We(we,{dialogRef:d,headerRef:u,bodyId:h,ns:n,rendered:f,style:w});const L=he(I),F=C(()=>a.modalPenetrable&&!a.modal&&!a.fullscreen);return s({visible:i,dialogContentRef:g,resetPosition:()=>{var l;(l=g.value)==null||l.resetPosition()},handleClose:S}),(l,j)=>(z(),te(o(Ge),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:D(()=>[Y(je,ce(o(p),{persisted:""}),{default:D(()=>{var U;return[Ue(Y(o(go),{"custom-mask-event":"",mask:l.modal,"overlay-class":[(U=l.modalClass)!=null?U:"",`${o(n).namespace.value}-modal-dialog`,o(n).is("penetrable",o(F))],"z-index":o(k)},{default:D(()=>[X("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(m),"aria-describedby":o(h),class:B(`${o(n).namespace.value}-overlay-dialog`),style:ge(o(v)),onClick:o(L).onClick,onMousedown:o(L).onMousedown,onMouseup:o(L).onMouseup},[Y(o(qe),{loop:"",trapped:o(i),"focus-start-el":"container",onFocusAfterTrapped:o(_),onFocusAfterReleased:o($),onFocusoutPrevented:o(O),onReleaseRequested:o(N)},{default:D(()=>[o(f)?(z(),te(Eo,ce({key:0,ref_key:"dialogContentRef",ref:g},l.$attrs,{center:l.center,"align-center":o(b),"close-icon":l.closeIcon,draggable:o(E),overflow:o(c),fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:o(S)}),Ve({header:D(()=>[l.$slots.title?P(l.$slots,"title",{key:1}):P(l.$slots,"header",{key:0,close:o(S),titleId:o(m),titleClass:o(n).e("title")})]),default:D(()=>[P(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:D(()=>[P(l.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):oe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Xe,o(i)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Po=pe(Mo,[["__file","dialog.vue"]]);const No=so(Po);export{No as E};
