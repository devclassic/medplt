import{_ as S,r as C,g as N,x as R,c as B,a as s,t as f,k as e,l as n,v as i,d as J,q as O,o as A}from"#entry";import{u as E,a as $}from"./Cs3dzKIV.js";const j={class:"wrap"},D={class:"box"},L={class:"btn-box"},q={class:"status"},z={class:"info1"},F={class:"form1"},I={class:"row"},M={class:"col"},G={class:"col"},H={class:"row"},K={class:"col"},P={class:"col"},Q={class:"row"},W={class:"col"},X={class:"col"},Y={class:"row"},Z={class:"col"},_={class:"col"},h={class:"info2"},tt={class:"info2-title"},st={class:"form2"},ot={class:"item"},lt={class:"item"},et={class:"item"},nt={class:"item"},it={class:"item"},dt={class:"item"},at={class:"item"},rt={class:"item"},ut={class:"item"},mt={class:"item"},pt={class:"item"},ft={class:"item"},vt={__name:"form",setup(xt){const o=C({status:"",btn1Text:"开始收音",btn3Text:"信息优化",form:{姓名:"",性别:"",年龄:"",电话:"",就诊时间:"",科室:"",接诊医生:"",地址:"",主诉:"",现病史:"",既往史:"",过敏史:"",家族史:"",体格检查:"",专科检查:"",辅助检查:"",初步诊断:"",鉴别诊断:"",治疗目的:"",健康教育:""},upfile:N("upfile")}),v=$(),x=O(),b=E();let a=R(!1);const U=async(d=null)=>{const l=(await b.getResult(d)).data[0]?.text,r=x.public.BASE_URL+"/api/client/asr/chat",u=`<内容>${l}</内容>

  请你分析<内容>中内容，并提取其中的关键信息，以 JSON 的形式输出，输出的 JSON 需遵守以下的格式：

  {
    "姓名": <姓名>,
    "性别": <性别>,
    "年龄": <年龄>,
    "电话": <电话>,
    "就诊时间": <就诊时间>,
    "科室": <科室>,
    "接诊医生": <接诊医生>,
    "地址": <地址>,
    "主诉": <主诉>,
    "现病史": <现病史>,
    "既往史": <既往史>,
    "过敏史": <过敏史>,
    "家族史": <家族史>,
    "体格检查": <体格检查>,
    "专科检查": <专科检查>,
    "辅助检查": <辅助检查>,
    "初步诊断": <初步诊断>,
    "鉴别诊断": <鉴别诊断>,
    "治疗目的": <治疗目的>,
    "健康教育": <健康教育>
  }

  如果<内容>中没有相关信息，则输出空字符串。
  输出的 JSON 中，所有的字段都必须包含在 JSON 中，不能省略。`,m=(await v.post(r,{prompt:u})).data.data.answer.replace(/<think>[\s\S]*?<\/think>/g,"").replace("```json","").replace("```",""),V=JSON.parse(m);for(const p in o.form)V[p]&&(o.form[p]=V[p])},y=async()=>{a.value?(o.status="生成对话...",await U(),o.status="",a.value=!1):(o.status="开始收音...",b.start(()=>{o.status="录音中...",a.value=!0},()=>{o.status="录音失败...",a.value=!1})),o.btn1Text=o.btn1Text==="开始收音"?"停止收音":"开始收音"},k=async()=>{o.upfile.click()},w=async d=>{const t=d.target.files[0];t&&(o.status="上传处理中...",await U(t),o.status="")},c=async()=>{o.btn3Text="优化中...";const d=x.public.BASE_URL+"/api/client/asr/chat",t=["主诉","现病史","既往史","过敏史","家族史","体格检查","专科检查","辅助检查","初步诊断","鉴别诊断","治疗目的","健康教育"];for(const l in o.form){const r=o.form[l];if(!t.includes(l)||!r)continue;const u=`<内容>${r}</内容>
<内容>为${l}。
你是一名专业医生，将医<内容>转化为标准医学表述，准确提取医患对话中的关键医疗信息，只优化最终结果，不提出意见，保持专业、客观的表述，你需要系统性地优化录音内容，消除所有口语化、模糊和带有语气词的表述，并使用精确、客观的医学术语进行规范记录，最终生成的语句需逻辑严谨、术语规范，符合医疗文书标准。`,m=(await v.post(d,{prompt:u})).data.data.answer.replace(/<think>[\s\S]*?<\/think>/g,"");o.form[l]=m.trim()}o.btn3Text="信息优化"},g=()=>{o.form={姓名:"",性别:"",年龄:"",电话:"",就诊时间:"",科室:"",接诊医生:"",地址:"",主诉:"",现病史:"",既往史:"",过敏史:"",家族史:"",体格检查:"",专科检查:"",辅助检查:"",初步诊断:"",鉴别诊断:"",治疗目的:"",健康教育:""}};return(d,t)=>(A(),B("div",j,[t[42]||(t[42]=s("div",{class:"title"},"语音表单",-1)),s("div",D,[s("div",L,[s("div",{onClick:y,class:"btn btn1"},f(e(o).btn1Text),1),s("div",{onClick:g,class:"btn btn2"},"重置表单"),s("input",{type:"file",ref:"upfile",onChange:w,style:{width:"0",height:"0",opacity:"0"}},null,544),s("div",{onClick:k,class:"btn btn4"},"语音上传"),s("div",q,f(e(o).status),1)]),s("div",z,[t[28]||(t[28]=s("div",{class:"info1-title"},"基本信息",-1)),s("div",F,[s("div",I,[s("div",M,[t[20]||(t[20]=s("div",null,"姓名：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[0]||(t[0]=l=>e(o).form.姓名=l)},null,512),[[i,e(o).form.姓名]])]),s("div",G,[t[21]||(t[21]=s("div",null,"就诊时间：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[1]||(t[1]=l=>e(o).form.就诊时间=l)},null,512),[[i,e(o).form.就诊时间]])])]),s("div",H,[s("div",K,[t[22]||(t[22]=s("div",null,"性别：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[2]||(t[2]=l=>e(o).form.性别=l)},null,512),[[i,e(o).form.性别]])]),s("div",P,[t[23]||(t[23]=s("div",{class:"label"},"科室：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[3]||(t[3]=l=>e(o).form.科室=l)},null,512),[[i,e(o).form.科室]])])]),s("div",Q,[s("div",W,[t[24]||(t[24]=s("div",null,"年龄：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[4]||(t[4]=l=>e(o).form.年龄=l)},null,512),[[i,e(o).form.年龄]])]),s("div",X,[t[25]||(t[25]=s("div",null,"接诊医生：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[5]||(t[5]=l=>e(o).form.接诊医生=l)},null,512),[[i,e(o).form.接诊医生]])])]),s("div",Y,[s("div",Z,[t[26]||(t[26]=s("div",null,"电话：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[6]||(t[6]=l=>e(o).form.电话=l)},null,512),[[i,e(o).form.电话]])]),s("div",_,[t[27]||(t[27]=s("div",{class:"label"},"地址：",-1)),n(s("input",{type:"text",placeholder:"请输入","onUpdate:modelValue":t[7]||(t[7]=l=>e(o).form.地址=l)},null,512),[[i,e(o).form.地址]])])])])]),s("div",h,[s("div",tt,[t[29]||(t[29]=J(" 主要信息 ",-1)),s("div",{onClick:c,class:"btn btn3"},f(e(o).btn3Text),1)]),s("div",st,[s("div",ot,[t[30]||(t[30]=s("div",{class:"h"},"主诉",-1)),n(s("textarea",{placeholder:"主诉","onUpdate:modelValue":t[8]||(t[8]=l=>e(o).form.主诉=l)},null,512),[[i,e(o).form.主诉]])]),s("div",lt,[t[31]||(t[31]=s("div",{class:"h"},"现病史",-1)),n(s("textarea",{placeholder:"现病史","onUpdate:modelValue":t[9]||(t[9]=l=>e(o).form.现病史=l)},null,512),[[i,e(o).form.现病史]])]),s("div",et,[t[32]||(t[32]=s("div",{class:"h"},"既往史",-1)),n(s("textarea",{placeholder:"既往史","onUpdate:modelValue":t[10]||(t[10]=l=>e(o).form.既往史=l)},null,512),[[i,e(o).form.既往史]])]),s("div",nt,[t[33]||(t[33]=s("div",{class:"h"},"过敏史",-1)),n(s("textarea",{placeholder:"过敏史","onUpdate:modelValue":t[11]||(t[11]=l=>e(o).form.过敏史=l)},null,512),[[i,e(o).form.过敏史]])]),s("div",it,[t[34]||(t[34]=s("div",{class:"h"},"家族史",-1)),n(s("textarea",{placeholder:"家族史","onUpdate:modelValue":t[12]||(t[12]=l=>e(o).form.家族史=l)},null,512),[[i,e(o).form.家族史]])]),s("div",dt,[t[35]||(t[35]=s("div",{class:"h"},"体格检查",-1)),n(s("textarea",{placeholder:"体格检查","onUpdate:modelValue":t[13]||(t[13]=l=>e(o).form.体格检查=l)},null,512),[[i,e(o).form.体格检查]])]),s("div",at,[t[36]||(t[36]=s("div",{class:"h"},"专科检查",-1)),n(s("textarea",{placeholder:"专科检查","onUpdate:modelValue":t[14]||(t[14]=l=>e(o).form.专科检查=l)},null,512),[[i,e(o).form.专科检查]])]),s("div",rt,[t[37]||(t[37]=s("div",{class:"h"},"辅助检查",-1)),n(s("textarea",{placeholder:"辅助检查","onUpdate:modelValue":t[15]||(t[15]=l=>e(o).form.辅助检查=l)},null,512),[[i,e(o).form.辅助检查]])]),s("div",ut,[t[38]||(t[38]=s("div",{class:"h"},"初步诊断",-1)),n(s("textarea",{placeholder:"初步诊断","onUpdate:modelValue":t[16]||(t[16]=l=>e(o).form.初步诊断=l)},null,512),[[i,e(o).form.初步诊断]])]),s("div",mt,[t[39]||(t[39]=s("div",{class:"h"},"鉴别诊断",-1)),n(s("textarea",{placeholder:"鉴别诊断","onUpdate:modelValue":t[17]||(t[17]=l=>e(o).form.鉴别诊断=l)},null,512),[[i,e(o).form.鉴别诊断]])]),s("div",pt,[t[40]||(t[40]=s("div",{class:"h"},"治疗目的",-1)),n(s("textarea",{placeholder:"治疗目的","onUpdate:modelValue":t[18]||(t[18]=l=>e(o).form.治疗目的=l)},null,512),[[i,e(o).form.治疗目的]])]),s("div",ft,[t[41]||(t[41]=s("div",{class:"h"},"健康教育",-1)),n(s("textarea",{placeholder:"健康教育","onUpdate:modelValue":t[19]||(t[19]=l=>e(o).form.健康教育=l)},null,512),[[i,e(o).form.健康教育]])])])])])]))}},Vt=S(vt,[["__scopeId","data-v-a5164387"]]);export{Vt as default};
