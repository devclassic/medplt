import{ac as J,O as R,b as Y,a5 as Pe,U as P,x as A,a2 as ye,a7 as Be,a6 as Le,i as ie,J as b,c as Z,o as z,a as j,R as ee,s as B,k as o,t as Ae,w as L,Q as oe,V as _e,W as ge,M as Oe,K as H,ad as Fe,I as $e,H as ze,D as Ne,C as ue,p as Ye,P as Re,ae as Ue,S as ce,l as Ve,af as Xe,a8 as je,X as He}from"#entry";import{P as Q,F as We,t as Ke,E as qe,a as Ge}from"./p4-vezJD.js";import{p as ne,u as le,q as W,A as xe,B as te,_ as pe,C as Je,E as Ze,n as Qe,k as Ce,s as de,x as eo,D as oo,t as to,F as no,G as lo,H as fe,w as so}from"./CEbQVcMT.js";import{d as ao}from"./B3xDuC8R.js";import{U as be,u as ro}from"./BRE3uSYE.js";import{t as io,u as ve}from"./C4gErKuu.js";import{g as uo}from"./CNSWhatW.js";import{u as co}from"./pn8GBfzJ.js";const he=e=>{if(!e)return{onClick:J,onMousedown:J,onMouseup:J};let s=!1,a=!1;return{onClick:u=>{s&&a&&e(u),s=a=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{a=u.target===u.currentTarget}}},fo=ne({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),vo={click:e=>e instanceof MouseEvent},mo="overlay";var yo=R({name:"ElOverlay",props:fo,emits:vo,setup(e,{slots:s,emit:a}){const y=le(mo),n=i=>{a("click",i)},{onClick:d,onMousedown:u,onMouseup:g}=he(e.customMaskEvent?void 0:n);return()=>e.mask?Y("div",{class:[y.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:g},[P(s,"default")],Q.STYLE|Q.CLASS|Q.PROPS,["onClick","onMouseup","onMousedown"]):Pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[P(s,"default")])}});const go=yo,we=Symbol("dialogInjectionKey"),me="dialog-fade",Ee=ne({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:xe},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),po={close:()=>!0},Co=(e,s,a,y)=>{const n={offsetX:0,offsetY:0},d=A(!1),u=(v,f)=>{if(e.value){const{offsetX:p,offsetY:k}=n,E=e.value.getBoundingClientRect(),C=E.left,c=E.top,S=E.width,I=E.height,_=document.documentElement.clientWidth,$=document.documentElement.clientHeight,N=-C+p,O=-c+k,D=_-C-S+p,F=$-c-(I<$?I:0)+k;y?.value||(v=Math.min(Math.max(v,N),D),f=Math.min(Math.max(f,O),F)),n.offsetX=v,n.offsetY=f,e.value.style.transform=`translate(${te(v)}, ${te(f)})`}},g=v=>{const f=v.clientX,p=v.clientY,{offsetX:k,offsetY:E}=n,C=S=>{d.value||(d.value=!0);const I=k+S.clientX-f,_=E+S.clientY-p;u(I,_)},c=()=>{d.value=!1,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",c)},i=()=>{s.value&&e.value&&(s.value.addEventListener("mousedown",g),window.addEventListener("resize",w))},m=()=>{s.value&&e.value&&(s.value.removeEventListener("mousedown",g),window.removeEventListener("resize",w))},h=()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},w=()=>{const{offsetX:v,offsetY:f}=n;u(v,f)};return ye(()=>{Be(()=>{a.value?i():m()})}),Le(()=>{m()}),{isDragging:d,resetPosition:h,updatePosition:w}},bo=(...e)=>s=>{e.forEach(a=>{a.value=s})},ho=R({name:"ElDialogContent"}),wo=R({...ho,props:Ee,emits:po,setup(e,{expose:s}){const a=e,{t:y}=ao(),{Close:n}=Je,{dialogRef:d,headerRef:u,bodyId:g,ns:i,style:m}=ie(we),{focusTrapRef:h}=ie(We),w=bo(h,d),v=b(()=>!!a.draggable),f=b(()=>!!a.overflow),{resetPosition:p,updatePosition:k,isDragging:E}=Co(d,u,v,f),C=b(()=>[i.b(),i.is("fullscreen",a.fullscreen),i.is("draggable",v.value),i.is("dragging",E.value),i.is("align-center",!!a.alignCenter),{[i.m("center")]:a.center}]);return s({resetPosition:p,updatePosition:k}),(c,S)=>(z(),Z("div",{ref:o(w),class:B(o(C)),style:ge(o(m)),tabindex:"-1"},[j("header",{ref_key:"headerRef",ref:u,class:B([o(i).e("header"),c.headerClass,{"show-close":c.showClose}])},[P(c.$slots,"header",{},()=>[j("span",{role:"heading","aria-level":c.ariaLevel,class:B(o(i).e("title"))},Ae(c.title),11,["aria-level"])]),c.showClose?(z(),Z("button",{key:0,"aria-label":o(y)("el.dialog.close"),class:B(o(i).e("headerbtn")),type:"button",onClick:I=>c.$emit("close")},[Y(o(Ze),{class:B(o(i).e("close"))},{default:L(()=>[(z(),oe(_e(c.closeIcon||o(n))))]),_:1},8,["class"])],10,["aria-label","onClick"])):ee("v-if",!0)],2),j("div",{id:o(g),class:B([o(i).e("body"),c.bodyClass])},[P(c.$slots,"default")],10,["id"]),c.$slots.footer?(z(),Z("footer",{key:0,class:B([o(i).e("footer"),c.footerClass])},[P(c.$slots,"footer")],2)):ee("v-if",!0)],6))}});var Eo=pe(wo,[["__file","dialog-content.vue"]]);const ko=ne({...Ee,appendToBody:Boolean,appendTo:{type:Ke.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:W([String,Object]),default:void 0}}),So={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[be]:e=>Qe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},To=(e,s={})=>{Oe(e)||io("[useLockscreen]","You need to pass a ref param to this function");const a=s.ns||le("popup"),y=b(()=>a.bm("parent","hidden"));if(!Ce||de(document.body,y.value))return;let n=0,d=!1,u="0";const g=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=u,to(document.body,y.value))},200)};H(e,i=>{if(!i){g();return}d=!de(document.body,y.value),d&&(u=document.body.style.width,eo(document.body,y.value)),n=uo(a.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,h=oo(document.body,"overflowY");n>0&&(m||h==="scroll")&&d&&(document.body.style.width=`calc(100% - ${n}px)`)}),Fe(()=>g())},Io=(e,s)=>{var a;const n=$e().emit,{nextZIndex:d}=no();let u="";const g=ve(),i=ve(),m=A(!1),h=A(!1),w=A(!1),v=A((a=e.zIndex)!=null?a:d());let f,p;const k=co(),E=b(()=>{var t,r;return(r=(t=k.value)==null?void 0:t.namespace)!=null?r:lo}),C=b(()=>{var t;return(t=k.value)==null?void 0:t.dialog}),c=b(()=>{const t={},r=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(t[`${r}-margin-top`]=e.top),e.width&&(t[`${r}-width`]=te(e.width))),t}),S=b(()=>{var t,r,T;return((T=(r=e.draggable)!=null?r:(t=C.value)==null?void 0:t.draggable)!=null?T:!1)&&!e.fullscreen}),I=b(()=>{var t,r,T;return(T=(r=e.alignCenter)!=null?r:(t=C.value)==null?void 0:t.alignCenter)!=null?T:!1}),_=b(()=>{var t,r,T;return(T=(r=e.overflow)!=null?r:(t=C.value)==null?void 0:t.overflow)!=null?T:!1}),$=b(()=>I.value?{display:"flex"}:{}),N=b(()=>{var t,r,T;const G=(T=(r=e.transition)!=null?r:(t=C.value)==null?void 0:t.transition)!=null?T:me,De={name:G,onAfterEnter:O,onBeforeLeave:F,onAfterLeave:D};if(ze(G)){const M={...G},x=(X,Me)=>ae=>{Ne(X)?X.forEach(re=>{ue(re)&&re(ae)}):ue(X)&&X(ae),Me()};return M.onAfterEnter=x(M.onAfterEnter,O),M.onBeforeLeave=x(M.onBeforeLeave,F),M.onAfterLeave=x(M.onAfterLeave,D),M.name||(M.name=me),M}return De});function O(){n("opened")}function D(){n("closed"),n(be,!1),e.destroyOnClose&&(w.value=!1)}function F(){n("close")}function K(){p?.(),f?.(),e.openDelay&&e.openDelay>0?{stop:f}=fe(()=>se(),e.openDelay):se()}function l(){f?.(),p?.(),e.closeDelay&&e.closeDelay>0?{stop:p}=fe(()=>q(),e.closeDelay):q()}function U(){function t(r){r||(h.value=!0,m.value=!1)}e.beforeClose?e.beforeClose(t):l()}function V(){e.closeOnClickModal&&U()}function se(){Ce&&(m.value=!0)}function q(){m.value=!1}function ke(){n("openAutoFocus")}function Se(){n("closeAutoFocus")}function Te(t){var r;((r=t.detail)==null?void 0:r.focusReason)==="pointer"&&t.preventDefault()}e.lockScroll&&To(m);function Ie(){e.closeOnPressEscape&&U()}return H(()=>e.zIndex,()=>{var t;v.value=(t=e.zIndex)!=null?t:d()}),H(()=>e.modelValue,t=>{var r;t?(h.value=!1,K(),w.value=!0,v.value=(r=e.zIndex)!=null?r:d(),Ye(()=>{n("open"),s.value&&(s.value.parentElement.scrollTop=0,s.value.parentElement.scrollLeft=0,s.value.scrollTop=0)})):m.value&&l()}),H(()=>e.fullscreen,t=>{s.value&&(t?(u=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=u)}),ye(()=>{e.modelValue&&(m.value=!0,w.value=!0,K())}),{afterEnter:O,afterLeave:D,beforeLeave:F,handleClose:U,onModalClick:V,close:l,doClose:q,onOpenAutoFocus:ke,onCloseAutoFocus:Se,onCloseRequested:Ie,onFocusoutPrevented:Te,titleId:g,bodyId:i,closed:h,style:c,overlayDialogStyle:$,rendered:w,visible:m,zIndex:v,transitionConfig:N,_draggable:S,_alignCenter:I,_overflow:_}},Do=R({name:"ElDialog",inheritAttrs:!1}),Mo=R({...Do,props:ko,emits:So,setup(e,{expose:s}){const a=e,y=Re();ro({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},b(()=>!!y.title));const n=le("dialog"),d=A(),u=A(),g=A(),{visible:i,titleId:m,bodyId:h,style:w,overlayDialogStyle:v,rendered:f,transitionConfig:p,zIndex:k,_draggable:E,_alignCenter:C,_overflow:c,handleClose:S,onModalClick:I,onOpenAutoFocus:_,onCloseAutoFocus:$,onCloseRequested:N,onFocusoutPrevented:O}=Io(a,d);He(we,{dialogRef:d,headerRef:u,bodyId:h,ns:n,rendered:f,style:w});const D=he(I),F=b(()=>a.modalPenetrable&&!a.modal&&!a.fullscreen);return s({visible:i,dialogContentRef:g,resetPosition:()=>{var l;(l=g.value)==null||l.resetPosition()},handleClose:S}),(l,U)=>(z(),oe(o(Ge),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:L(()=>[Y(Ue,ce(o(p),{persisted:""}),{default:L(()=>{var V;return[Ve(Y(o(go),{"custom-mask-event":"",mask:l.modal,"overlay-class":[(V=l.modalClass)!=null?V:"",`${o(n).namespace.value}-modal-dialog`,o(n).is("penetrable",o(F))],"z-index":o(k)},{default:L(()=>[j("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(m),"aria-describedby":o(h),class:B(`${o(n).namespace.value}-overlay-dialog`),style:ge(o(v)),onClick:o(D).onClick,onMousedown:o(D).onMousedown,onMouseup:o(D).onMouseup},[Y(o(qe),{loop:"",trapped:o(i),"focus-start-el":"container",onFocusAfterTrapped:o(_),onFocusAfterReleased:o($),onFocusoutPrevented:o(O),onReleaseRequested:o(N)},{default:L(()=>[o(f)?(z(),oe(Eo,ce({key:0,ref_key:"dialogContentRef",ref:g},l.$attrs,{center:l.center,"align-center":o(C),"close-icon":l.closeIcon,draggable:o(E),overflow:o(c),fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:o(S)}),Xe({header:L(()=>[l.$slots.title?P(l.$slots,"title",{key:1}):P(l.$slots,"header",{key:0,close:o(S),titleId:o(m),titleClass:o(n).e("title")})]),default:L(()=>[P(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:L(()=>[P(l.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):ee("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[je,o(i)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Po=pe(Mo,[["__file","dialog.vue"]]);const No=so(Po);export{No as E};
