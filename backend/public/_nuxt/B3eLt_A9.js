import{f as Ze,y as oe,m as Ce,a1 as Ge,p as et,q as O,I as tt,A as ae,a2 as ot,_ as at,u as Ie,V as nt,a3 as st,z as lt,E as H,k as it,w as rt}from"./CEbQVcMT.js";import{J as h,I as J,x as z,i as D,k as t,a2 as Le,K,ar as Re,a4 as ut,p as L,ak as q,C as Ee,B as ne,aj as ct,O as Ae,av as dt,P as pt,aw as ft,ax as vt,c as C,o as y,R as g,F as se,a as V,s as w,U as Y,Q as I,w as M,V as $,S as ze,n as mt,ac as ht,t as X,W as Pe,H as Fe}from"#entry";import{j as yt,u as gt}from"./B3xDuC8R.js";import{f as ie,a as Be,u as bt}from"./C5F93--S.js";import{U as le,I as Ne,C as ke}from"./BRE3uSYE.js";import{u as wt,i as xt,d as Te}from"./C4gErKuu.js";function qt(){if(!arguments.length)return[];var a=arguments[0];return Ze(a)?a:[a]}const Oe=a=>{const n=J();return h(()=>{var s,o;return(o=(s=n?.proxy)==null?void 0:s.$props)==null?void 0:o[a]})},St=(a,n={})=>{const s=z(void 0),o=n.prop?s:Oe("size"),u=n.global?s:yt(),c=n.form?{size:void 0}:D(ie,void 0),i=n.formItem?{size:void 0}:D(Be,void 0);return h(()=>o.value||t(a)||i?.size||c?.size||u.value||"")},Ct=a=>{const n=Oe("disabled"),s=D(ie,void 0);return h(()=>n.value||t(a)||s?.disabled||!1)},It=()=>{const a=D(ie,void 0),n=D(Be,void 0);return{form:a,formItem:n}},Et=(a,{formItemContext:n,disableIdGeneration:s,disableIdManagement:o})=>{s||(s=z(!1)),o||(o=z(!1));const u=J(),c=()=>{let r=u?.parent;for(;r;){if(r.type.name==="ElFormItem")return!1;if(r.type.name==="ElLabelWrap")return!0;r=r.parent}return!1},i=z();let d;const f=h(()=>{var r;return!!(!(a.label||a.ariaLabel)&&n&&n.inputIds&&((r=n.inputIds)==null?void 0:r.length)<=1)});return Le(()=>{d=K([Re(a,"id"),s],([r,m])=>{const S=r??(m?void 0:wt().value);S!==i.value&&(n?.removeInputId&&!c()&&(i.value&&n.removeInputId(i.value),!o?.value&&!m&&S&&n.addInputId(S)),i.value=S)},{immediate:!0})}),ut(()=>{d&&d(),n?.removeInputId&&i.value&&n.removeInputId(i.value)}),{isLabeledByFormItem:f,inputId:i}},zt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function Pt({afterComposition:a,emit:n}){const s=z(!1),o=d=>{n?.("compositionstart",d),s.value=!0},u=d=>{var f;n?.("compositionupdate",d);const r=(f=d.target)==null?void 0:f.value,m=r[r.length-1]||"";s.value=!zt(m)},c=d=>{n?.("compositionend",d),s.value&&(s.value=!1,L(()=>a(d)))};return{isComposing:s,handleComposition:d=>{d.type==="compositionend"?c(d):u(d)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:c}}function Ft(a,{disabled:n,beforeFocus:s,afterFocus:o,beforeBlur:u,afterBlur:c}={}){const i=J(),{emit:d}=i,f=q(),r=z(!1),m=v=>{const l=Ee(s)?s(v):!1;t(n)||r.value||l||(r.value=!0,d("focus",v),o?.())},S=v=>{var l;const P=Ee(u)?u(v):!1;t(n)||v.relatedTarget&&((l=f.value)!=null&&l.contains(v.relatedTarget))||P||(r.value=!1,d("blur",v),c?.())},b=v=>{var l,P;t(n)||xt(v.target)||(l=f.value)!=null&&l.contains(document.activeElement)&&f.value!==document.activeElement||(P=a.value)==null||P.focus()};return K([f,()=>t(n)],([v,l])=>{v&&(l?v.removeAttribute("tabindex"):v.setAttribute("tabindex","-1"))}),oe(f,"focus",m,!0),oe(f,"blur",S,!0),oe(f,"click",b,!0),{isFocused:r,wrapperRef:f,handleFocus:m,handleBlur:S}}let x;const Nt={height:"0",visibility:"hidden",overflow:Ge()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},kt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function Tt(a){const n=window.getComputedStyle(a),s=n.getPropertyValue("box-sizing"),o=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),u=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:kt.map(i=>[i,n.getPropertyValue(i)]),paddingSize:o,borderSize:u,boxSizing:s}}function Ve(a,n=1,s){var o,u;x||(x=document.createElement("textarea"),((o=a.parentNode)!=null?o:document.body).appendChild(x));const{paddingSize:c,borderSize:i,boxSizing:d,contextStyle:f}=Tt(a);f.forEach(([b,v])=>x?.style.setProperty(b,v)),Object.entries(Nt).forEach(([b,v])=>x?.style.setProperty(b,v,"important")),x.value=a.value||a.placeholder||"";let r=x.scrollHeight;const m={};d==="border-box"?r=r+i:d==="content-box"&&(r=r-c),x.value="";const S=x.scrollHeight-c;if(Ce(n)){let b=S*n;d==="border-box"&&(b=b+c+i),r=Math.max(b,r),m.minHeight=`${b}px`}if(Ce(s)){let b=S*s;d==="border-box"&&(b=b+c+i),r=Math.min(b,r)}return m.height=`${r}px`,(u=x.parentNode)==null||u.removeChild(x),x=void 0,m}const Vt=et({id:{type:String,default:void 0},size:gt,disabled:Boolean,modelValue:{type:O([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:O([Boolean,Object]),default:!1},autocomplete:{type:O(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:ae,default:ct},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:ae},prefixIcon:{type:ae},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:O([Object,Array,String]),default:()=>tt({})},autofocus:Boolean,rows:{type:Number,default:2},...bt(["ariaLabel"]),inputmode:{type:O(String),default:void 0},name:String}),Lt={[le]:a=>ne(a),input:a=>ne(a),change:a=>ne(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Rt=["class","style"],At=/^on[A-Z]/,Bt=(a={})=>{const{excludeListeners:n=!1,excludeKeys:s}=a,o=h(()=>(s?.value||[]).concat(Rt)),u=J();return u?h(()=>{var c;return ot(Object.entries((c=u.proxy)==null?void 0:c.$attrs).filter(([i])=>!o.value.includes(i)&&!(n&&At.test(i))))}):h(()=>({}))};function Ot(a){let n;function s(){if(a.value==null)return;const{selectionStart:u,selectionEnd:c,value:i}=a.value;if(u==null||c==null)return;const d=i.slice(0,Math.max(0,u)),f=i.slice(Math.max(0,c));n={selectionStart:u,selectionEnd:c,value:i,beforeTxt:d,afterTxt:f}}function o(){if(a.value==null||n==null)return;const{value:u}=a.value,{beforeTxt:c,afterTxt:i,selectionStart:d}=n;if(c==null||i==null||d==null)return;let f=u.length;if(u.endsWith(i))f=u.length-i.length;else if(u.startsWith(c))f=c.length;else{const r=c[d-1],m=u.indexOf(r,d-1);m!==-1&&(f=m+1)}a.value.setSelectionRange(f,f)}return[s,o]}const Ht="ElInput",Mt=Ae({name:Ht,inheritAttrs:!1}),$t=Ae({...Mt,props:Vt,emits:Lt,setup(a,{expose:n,emit:s}){const o=a,u=dt(),c=Bt(),i=pt(),d=h(()=>[o.type==="textarea"?P.b():l.b(),l.m(b.value),l.is("disabled",v.value),l.is("exceed",Ue.value),{[l.b("group")]:i.prepend||i.append,[l.m("prefix")]:i.prefix||o.prefixIcon,[l.m("suffix")]:i.suffix||o.suffixIcon||o.clearable||o.showPassword,[l.bm("suffix","password-clear")]:W.value&&G.value,[l.b("hidden")]:o.type==="hidden"},u.class]),f=h(()=>[l.e("wrapper"),l.is("focus",Z.value)]),{form:r,formItem:m}=It(),{inputId:S}=Et(o,{formItemContext:m}),b=St(),v=Ct(),l=Ie("input"),P=Ie("textarea"),U=q(),E=q(),Q=z(!1),j=z(!1),re=z(),_=q(o.inputStyle),N=h(()=>U.value||E.value),{wrapperRef:He,isFocused:Z,handleFocus:Me,handleBlur:$e}=Ft(N,{disabled:v,afterBlur(){var e;o.validateEvent&&((e=m?.validate)==null||e.call(m,"blur").catch(p=>Te()))}}),ue=h(()=>{var e;return(e=r?.statusIcon)!=null?e:!1}),R=h(()=>m?.validateState||""),ce=h(()=>R.value&&nt[R.value]),Ke=h(()=>j.value?ft:vt),De=h(()=>[u.style]),de=h(()=>[o.inputStyle,_.value,{resize:o.resize}]),F=h(()=>st(o.modelValue)?"":String(o.modelValue)),W=h(()=>o.clearable&&!v.value&&!o.readonly&&!!F.value&&(Z.value||Q.value)),G=h(()=>o.showPassword&&!v.value&&!!F.value),k=h(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!v.value&&!o.readonly&&!o.showPassword),ee=h(()=>F.value.length),Ue=h(()=>!!k.value&&ee.value>Number(o.maxlength)),je=h(()=>!!i.suffix||!!o.suffixIcon||W.value||o.showPassword||k.value||!!R.value&&ue.value),[pe,fe]=Ot(U);lt(E,e=>{if(_e(),!k.value||o.resize!=="both")return;const p=e[0],{width:T}=p.contentRect;re.value={right:`calc(100% - ${T+15+6}px)`}});const A=()=>{const{type:e,autosize:p}=o;if(!(!it||e!=="textarea"||!E.value))if(p){const T=Fe(p)?p.minRows:void 0,xe=Fe(p)?p.maxRows:void 0,Se=Ve(E.value,T,xe);_.value={overflowY:"hidden",...Se},L(()=>{E.value.offsetHeight,_.value=Se})}else _.value={minHeight:Ve(E.value).minHeight}},_e=(e=>{let p=!1;return()=>{var T;if(p||!o.autosize)return;((T=E.value)==null?void 0:T.offsetParent)===null||(setTimeout(e),p=!0)}})(A),B=()=>{const e=N.value,p=o.formatter?o.formatter(F.value):F.value;!e||e.value===p||(e.value=p)},te=async e=>{pe();let{value:p}=e.target;if(o.formatter&&o.parser&&(p=o.parser(p)),!me.value){if(p===F.value){B();return}s(le,p),s(Ne,p),await L(),B(),fe()}},ve=e=>{let{value:p}=e.target;o.formatter&&o.parser&&(p=o.parser(p)),s(ke,p)},{isComposing:me,handleCompositionStart:he,handleCompositionUpdate:ye,handleCompositionEnd:ge}=Pt({emit:s,afterComposition:te}),We=()=>{pe(),j.value=!j.value,setTimeout(fe)},Ye=()=>{var e;return(e=N.value)==null?void 0:e.focus()},Xe=()=>{var e;return(e=N.value)==null?void 0:e.blur()},qe=e=>{Q.value=!1,s("mouseleave",e)},Je=e=>{Q.value=!0,s("mouseenter",e)},be=e=>{s("keydown",e)},Qe=()=>{var e;(e=N.value)==null||e.select()},we=()=>{s(le,""),s(ke,""),s("clear"),s(Ne,"")};return K(()=>o.modelValue,()=>{var e;L(()=>A()),o.validateEvent&&((e=m?.validate)==null||e.call(m,"change").catch(p=>Te()))}),K(F,()=>B()),K(()=>o.type,async()=>{await L(),B(),A()}),Le(()=>{!o.formatter&&o.parser,B(),L(A)}),n({input:U,textarea:E,ref:N,textareaStyle:de,autosize:Re(o,"autosize"),isComposing:me,focus:Ye,blur:Xe,select:Qe,clear:we,resizeTextarea:A}),(e,p)=>(y(),C("div",{class:w([t(d),{[t(l).bm("group","append")]:e.$slots.append,[t(l).bm("group","prepend")]:e.$slots.prepend}]),style:Pe(t(De)),onMouseenter:Je,onMouseleave:qe},[g(" input "),e.type!=="textarea"?(y(),C(se,{key:0},[g(" prepend slot "),e.$slots.prepend?(y(),C("div",{key:0,class:w(t(l).be("group","prepend"))},[Y(e.$slots,"prepend")],2)):g("v-if",!0),V("div",{ref_key:"wrapperRef",ref:He,class:w(t(f))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(y(),C("span",{key:0,class:w(t(l).e("prefix"))},[V("span",{class:w(t(l).e("prefix-inner"))},[Y(e.$slots,"prefix"),e.prefixIcon?(y(),I(t(H),{key:0,class:w(t(l).e("icon"))},{default:M(()=>[(y(),I($(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),V("input",ze({id:t(S),ref_key:"input",ref:U,class:t(l).e("inner")},t(c),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?j.value?"text":"password":e.type,disabled:t(v),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(he),onCompositionupdate:t(ye),onCompositionend:t(ge),onInput:te,onChange:ve,onKeydown:be}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),g(" suffix slot "),t(je)?(y(),C("span",{key:1,class:w(t(l).e("suffix"))},[V("span",{class:w(t(l).e("suffix-inner"))},[!t(W)||!t(G)||!t(k)?(y(),C(se,{key:0},[Y(e.$slots,"suffix"),e.suffixIcon?(y(),I(t(H),{key:0,class:w(t(l).e("icon"))},{default:M(()=>[(y(),I($(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),t(W)?(y(),I(t(H),{key:1,class:w([t(l).e("icon"),t(l).e("clear")]),onMousedown:mt(t(ht),["prevent"]),onClick:we},{default:M(()=>[(y(),I($(e.clearIcon)))]),_:1},8,["class","onMousedown"])):g("v-if",!0),t(G)?(y(),I(t(H),{key:2,class:w([t(l).e("icon"),t(l).e("password")]),onClick:We},{default:M(()=>[(y(),I($(t(Ke))))]),_:1},8,["class"])):g("v-if",!0),t(k)?(y(),C("span",{key:3,class:w(t(l).e("count"))},[V("span",{class:w(t(l).e("count-inner"))},X(t(ee))+" / "+X(e.maxlength),3)],2)):g("v-if",!0),t(R)&&t(ce)&&t(ue)?(y(),I(t(H),{key:4,class:w([t(l).e("icon"),t(l).e("validateIcon"),t(l).is("loading",t(R)==="validating")])},{default:M(()=>[(y(),I($(t(ce))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(y(),C("div",{key:1,class:w(t(l).be("group","append"))},[Y(e.$slots,"append")],2)):g("v-if",!0)],64)):(y(),C(se,{key:1},[g(" textarea "),V("textarea",ze({id:t(S),ref_key:"textarea",ref:E,class:[t(P).e("inner"),t(l).is("focus",t(Z))]},t(c),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(v),readonly:e.readonly,autocomplete:e.autocomplete,style:t(de),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(he),onCompositionupdate:t(ye),onCompositionend:t(ge),onInput:te,onFocus:t(Me),onBlur:t($e),onChange:ve,onKeydown:be}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(k)?(y(),C("span",{key:0,style:Pe(re.value),class:w(t(l).e("count"))},X(t(ee))+" / "+X(e.maxlength),7)):g("v-if",!0)],64))],38))}});var Kt=at($t,[["__file","input.vue"]]);const Jt=rt(Kt);export{Jt as E,It as a,St as b,qt as c,Et as d,Pt as e,Ft as f,Ct as u};
